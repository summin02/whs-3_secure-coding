<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>ë¡œê·¸ ëŒ€ì‹œë³´ë“œ</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
    <script src="https://cdn.socket.io/4.6.1/socket.io.min.js"></script>

</head>
<body class="bg-light">
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark px-3">
        <h3 class="navbar-brand mb-2">ğŸ§¾ ë¡œê·¸ ëŒ€ì‹œë³´ë“œ</h3>
        <div class="ms-auto">
            <a href="/admin" class="btn btn-secondary btn-sm">â† ê´€ë¦¬ì í™ˆìœ¼ë¡œ</a>
        </dev>
    </nav>
    <div class="container mt-5">
        <h3 class="mb-4">ğŸ‘‘ ì‹¤ì‹œê°„ ê´€ë¦¬ì ë¡œê·¸</h3>


        <div class="list-group mb-4">
            <a href="/admin/logs/chat" class="list-group-item list-group-item-action">ğŸ“© ì‹¤ì‹œê°„ ì±„íŒ… ë¡œê·¸</a>
            <a href="/admin/logs/items" class="list-group-item list-group-item-action">ğŸ“¦ ì‹¤ì‹œê°„ ê²Œì‹œë¬¼ ì‘ì—… ë¡œê·¸</a>
            <a href="/admin/logs/reports" class="list-group-item list-group-item-action">ğŸš¨ ì‹¤ì‹œê°„ ì‹ ê³  ë¡œê·¸</a>
        </div>

        <ul id="log-list" class="list-group mb-4">
            {% for log in logs %}
                {% if log.log_type.upper() == "ADMIN" %}
                    <li class="list-group-item">
                        <strong>[{{ log.log_type|upper }}]</strong> {{ log.message }}
                        <small class="text-muted float-end">{{ log.created_at }}</small>
                    </li>
                {% endif %}
            {% endfor %}
        </ul>
        
    </div>
    <div class="container mt-5"></div>
    <script>
        const socket = io('/admin');
    
        socket.on('connect', () => {
            console.log("âœ… log_chat ì†Œì¼“ ì—°ê²°ë¨");
        });
    
        socket.on('new_log', function(data) {
            const logList = document.getElementById("log-list");
            const li = document.createElement("li");
            const now = new Date().toLocaleString();
    
            li.className = "list-group-item";
            li.innerHTML = `<strong>[${data.log_type.toUpperCase()}]</strong> ${data.message}
                            <small class="text-muted float-end">${now}</small>`;
            logList.prepend(li);
        });

        
    </script>
</body>
</html>